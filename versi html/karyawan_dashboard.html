<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard Karyawan</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Dashboard Karyawan</a>
    </div>
  </nav>

  <!-- Main content -->
  <main class="container mb-5">
    <!-- What's New -->
    <hr class="my-4">

    <!-- Tabel Karyawan -->
    <h3>Data Karyawan</h3>

    
      

      <!-- Form Pencarian -->
      <div class="row mb-3">
        <div class="col-md-6">
          <input type="text" id="searchInput" class="form-control" placeholder="Cari nama karyawan..." onkeyup="filterTable()">
        </div>
      </div>
      
      <a href="index.html" class="btn btn-secondary mb-3">
        <i class="bi bi-arrow-left-circle"></i> Kembali ke Beranda
      </a>
      
      <!-- Tombol tambah -->
      <button class="btn btn-primary mb-3 ms-2" data-bs-toggle="modal" data-bs-target="#addKaryawanModal">
        <i class="bi bi-plus-circle"></i> Tambah Karyawan
      </button>
    <div class="table-responsive">
      <table class="table table-bordered table-striped" id="karyawanTable">
        <thead class="table-dark">
          <tr>
            <th>No</th>
            <th>Foto</th>
            <th>Nama</th>
            <th>Jabatan</th>
            <th>Divisi</th>
            <th>Tanggal Masuk</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="karyawanBody">
          <tr>
            <td>1</td>
            <td><img src="URL_FOTO_1" alt="Foto Ahmad Yusuf" width="50" height="50" class="rounded-circle"></td>
            <td>Ahmad Yusuf</td>
            <td>Staf HR</td>
            <td>HR</td>
            <td>2022-01-10</td>
            <td>
              <button class="btn btn-sm btn-warning" onclick="editRow(this)">Edit</button>
              <button class="btn btn-sm btn-danger" onclick="deleteRow(this)">Hapus</button>
            </td>
          </tr>
          <tr>
            <td>2</td>
            <td><img src="URL_FOTO_2" alt="Foto Siti Rahma" width="50" height="50" class="rounded-circle"></td>
            <td>Siti Rahma</td>
            <td>Supervisor</td>
            <td>Manajemen</td>
            <td>2021-07-15</td>
            <td>
              <button class="btn btn-sm btn-warning" onclick="editRow(this)">Edit</button>
              <button class="btn btn-sm btn-danger" onclick="deleteRow(this)">Hapus</button>
            </td>
          </tr>
          <tr>
            <td>3</td>
            <td><img src="URL_FOTO_3" alt="Foto Budi Santoso" width="50" height="50" class="rounded-circle"></td>
            <td>Budi Santoso</td>
            <td>Operator</td>
            <td>Gudang</td>
            <td>2023-03-01</td>
            <td>
              <button class="btn btn-sm btn-warning" onclick="editRow(this)">Edit</button>
              <button class="btn btn-sm btn-danger" onclick="deleteRow(this)">Hapus</button>
            </td>
          </tr>
          <tr>
            <td>4</td>
            <td><img src="URL_FOTO_4" alt="Foto Lina Marlina" width="50" height="50" class="rounded-circle"></td>
            <td>Lina Marlina</td>
            <td>Manager</td>
            <td>Manajemen</td>
            <td>2020-09-25</td>
            <td>
              <button class="btn btn-sm btn-warning" onclick="editRow(this)">Edit</button>
              <button class="btn btn-sm btn-danger" onclick="deleteRow(this)">Hapus</button>
            </td>
          </tr>
          <tr>
            <td>5</td>
            <td><img src="URL_FOTO_5" alt="Foto Rudi Hartono" width="50" height="50" class="rounded-circle"></td>
            <td>Rudi Hartono</td>
            <td>Staf Gudang</td>
            <td>Gudang</td>
            <td>2022-11-11</td>
            <td>
              <button class="btn btn-sm btn-warning" onclick="editRow(this)">Edit</button>
              <button class="btn btn-sm btn-danger" onclick="deleteRow(this)">Hapus</button>
            </td>
          </tr>
        </tbody>
        
      </table>
    </div>
  </main>

  <!-- Modal Tambah/Edit -->
  <div class="modal fade" id="addKaryawanModal" tabindex="-1" aria-labelledby="addKaryawanModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <form id="karyawanForm" onsubmit="saveKaryawan(event)">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Form Karyawan</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <input type="hidden" id="editIndex">
            <div class="mb-2">
              <label class="form-label">URL Foto</label>
              <input type="url" class="form-control" id="foto">
            </div>
            <div class="mb-2">
              <label class="form-label">Nama</label>
              <input type="text" class="form-control" id="nama" required>
            </div>
            <div class="mb-2">
              <label class="form-label">Jabatan</label>
              <input type="text" class="form-control" id="jabatan" required>
            </div>
            <div class="mb-2">
              <label class="form-label">Divisi</label>
              <input type="text" class="form-control" id="divisi" required>
            </div>
            <div class="mb-2">
              <label class="form-label">Tanggal Masuk</label>
              <input type="date" class="form-control" id="tanggalMasuk" required>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-success">Simpan</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- JavaScript Bootstrap & CRUD -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function saveKaryawan(event) {
      event.preventDefault();
      const index = document.getElementById('editIndex').value;
      const foto = document.getElementById('foto').value;
      const nama = document.getElementById('nama').value;
      const jabatan = document.getElementById('jabatan').value;
      const divisi = document.getElementById('divisi').value;
      const tanggal = document.getElementById('tanggalMasuk').value;
      const tbody = document.getElementById('karyawanBody');

      if (index === "") {
        const row = tbody.insertRow();
        row.innerHTML = `
          <td></td>
          <td><img src="${foto}" alt="Foto" width="50" height="50" class="rounded-circle"></td>
          <td>${nama}</td>
          <td>${jabatan}</td>
          <td>${divisi}</td>
          <td>${tanggal}</td>
          <td>
            <button class="btn btn-sm btn-warning" onclick="editRow(this)">Edit</button>
            <button class="btn btn-sm btn-danger" onclick="deleteRow(this)">Hapus</button>
          </td>`;
      } else {
        const row = tbody.rows[index];
        row.cells[1].innerText = nama;
        row.cells[2].innerText = jabatan;
        row.cells[3].innerText = divisi;
        row.cells[4].innerText = tanggal;
      }

      updateRowNumbers();
      document.getElementById('karyawanForm').reset();
      document.getElementById('editIndex').value = '';
      const modal = bootstrap.Modal.getInstance(document.getElementById('addKaryawanModal'));
      modal.hide();
    }

    function editRow(btn) {
      const row = btn.closest('tr');
      const index = row.rowIndex - 1;
      document.getElementById('editIndex').value = index;
      document.getElementById('nama').value = row.cells[1].innerText;
      document.getElementById('jabatan').value = row.cells[2].innerText;
      document.getElementById('divisi').value = row.cells[3].innerText;
      document.getElementById('tanggalMasuk').value = row.cells[4].innerText;
      const modal = new bootstrap.Modal(document.getElementById('addKaryawanModal'));
      modal.show();
    }

    function deleteRow(btn) {
      if (confirm("Yakin ingin menghapus data ini?")) {
        const row = btn.closest('tr');
        row.remove();
        updateRowNumbers();
      }
    }

    function updateRowNumbers() {
      const rows = document.querySelectorAll('#karyawanBody tr');
      rows.forEach((row, i) => {
        row.cells[0].innerText = i + 1;
      });
    }

    function filterTable() {
        const input = document.getElementById("searchInput").value.toLowerCase();
        const rows = document.querySelectorAll("#karyawanBody tr");
      
        rows.forEach(row => {
          const nama = row.cells[2].innerText.toLowerCase();
          if (nama.includes(input)) {
            row.style.display = "";
          } else {
            row.style.display = "none";
          }
        });
      }
      
  </script>
</body>
</html>
